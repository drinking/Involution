# Monitor (synchronization)

In [concurrent programming](https://en.wikipedia.org/wiki/Concurrent_computing "Concurrent computing") (also known as parallel programming), a **monitor** is a synchronization construct that allows [threads](https://en.wikipedia.org/wiki/Thread_(computing) "Thread (computing)") to have both [mutual exclusion](https://en.wikipedia.org/wiki/Mutual_exclusion "Mutual exclusion") and the ability to wait (block) for a certain condition to become false. Monitors also have a mechanism for signaling other threads that their condition has been met. A monitor consists of a [mutex (lock)](https://en.wikipedia.org/wiki/Lock_(computer_science) "Lock (computer science)") object and **condition variables**. A **condition variable** essentially is a container of threads that are waiting for a certain condition. Monitors provide a mechanism for threads to temporarily give up exclusive access in order to wait for some condition to be met, before regaining exclusive access and resuming their task.

Another definition of **monitor** is a **thread-safe** [class](https://en.wikipedia.org/wiki/Class_(computer_science) "Class (computer science)"), [object](https://en.wikipedia.org/wiki/Object_(computer_science) "Object (computer science)"), or [module](https://en.wikipedia.org/wiki/Module_(programming) "Module (programming)") that wraps around a [mutex](https://en.wikipedia.org/wiki/Mutual_exclusion "Mutual exclusion") in order to safely allow access to a method or variable by more than one [thread](https://en.wikipedia.org/wiki/Thread_(computer_science) "Thread (computer science)"). The defining characteristic of a monitor is that its methods are executed with [mutual exclusion](https://en.wikipedia.org/wiki/Mutual_exclusion "Mutual exclusion"): At each point in time, at most one thread may be executing any of its [methods](https://en.wikipedia.org/wiki/Method_(computer_science) "Method (computer science)"). By using one or more condition variables it can also provide the ability for threads to wait on a certain condition (thus using the above definition of a "monitor"). For the rest of this article, this sense of "monitor" will be referred to as a "thread-safe object/class/module".

Monitors were invented by [Per Brinch Hansen](https://en.wikipedia.org/wiki/Per_Brinch_Hansen "Per Brinch Hansen")[[1]](https://en.wikipedia.org/wiki/Monitor_(synchronization)#cite_note-:0-1) and [C. A. R. Hoare](https://en.wikipedia.org/wiki/C._A._R._Hoare "C. A. R. Hoare"),[[2]](https://en.wikipedia.org/wiki/Monitor_(synchronization)#cite_note-:1-2) and were first implemented in [Brinch Hansen's](https://en.wikipedia.org/wiki/Per_Brinch_Hansen "Per Brinch Hansen") [Concurrent Pascal](https://en.wikipedia.org/wiki/Concurrent_Pascal "Concurrent Pascal") language.[[3]](https://en.wikipedia.org/wiki/Monitor_(synchronization)#cite_note-3)


### 参考资料
- https://en.wikipedia.org/wiki/Monitor_(synchronization)
- [Java - how does Lock guarantee happens-before relationship?](https://stackoverflow.com/questions/43557339/java-how-does-lock-guarantee-happens-before-relationship)